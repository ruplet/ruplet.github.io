<div id="comments-container">
  <p>
    You can comment on this post using <a href="https://github.com/ruplet/ruplet.github.io/discussions" target="_blank"
      rel="noopener noreferrer">GitHub Discussions</a>.
    <br>
    Alternatively, use the Giscus-powered comment system below (requires JavaScript).
  </p>
</div>

<script>
  (function () {
    const commentsContainer = document.getElementById("comments-container");
    const s = document.createElement('script');
    let giscusTheme = "light";

    // Detect preferred color scheme for theme
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      giscusTheme = "dark";
    }

    let giscusAttributes = {
      "src": "https://giscus.app/client.js",
      "data-repo": "ruplet/ruplet.github.io",
      "data-repo-id": "R_kgDOKoVjPA",
      "data-category": "Announcements", // Ensure this category exists in your repo's discussions
      "data-category-id": "DIC_kwDOKoVjPM4CgAyU", // Ensure this ID is correct for your category
      "data-mapping": "pathname",
      "data-strict": "0",
      "data-reactions-enabled": "1",
      "data-emit-metadata": "0",
      "data-input-position": "top",
      "data-theme": giscusTheme,
      "data-lang": "en",
      "data-loading": "lazy",
      "crossorigin": "anonymous",
      "async": "",
    };

    try {
      Object.entries(giscusAttributes).forEach(([key, value]) => s.setAttribute(key, value));
      commentsContainer.appendChild(s);

      s.onerror = () => {
        console.error("Giscus script failed to load.");
      };

    } catch (e) {
      console.error("Error loading Giscus script:", e);
    }
  })();
</script>

<noscript>
  Please enable JavaScript to view the <a href="https://giscus.app/?ref_noscript" target="_blank"
    rel="noopener noreferrer">comments powered by Giscus</a>, or use the <a
    href="https://github.com/ruplet/ruplet.github.io/discussions" target="_blank" rel="noopener noreferrer">GitHub
    Discussions</a> link above.
</noscript>